<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title> Dates - 당신의 소중한 하루</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="Description" lang="en" content="open source x/html and css templates">
<meta name="author" content="mlp design">
<meta name="robots" content="index, follow">
<link rel="stylesheet" href="styles.css">
</head>
<body>
<!--start wrapper-->
<div id="wrapper">

<!--start body-->
<div id="body">

<!--start header-->
<div id="banner">
<h1>Dates </h1>
<p> 당신의 소중한 하루, NFT로 기억하세요</p>
<!-- menu -->
<label for="show-menu" class="responsive">&#9776;</label>
<input type="checkbox" id="show-menu" role="button">
<!-- <ul id="topnav">
<li><a class="active">Home</a></li>
<li><a href="#">Page 2</a></li>
<li><a href="#">Page 3</a></li>
<li><a href="#">Page 4</a></li>
<li><a href="#">Page 5</a></li>
</ul> -->
<!-- end menu -->
</div>
<!--end of header-->
	<!--start sidebar-->
	<div id="sidebar">
		<h2>About</h2>
        <p> Team Dates는 <a href="https://www.bnbchain.org/en">Binance Smart Chain</a> 기반으로 소중한 하루하루를 NFT로 발행합니다.
            NFT의 Holder는 Team Dates의 캘린더에 수정권한,  관리권한 등이  부여됩니다.</p>
		<p> 백서를 통하여 Team Dates의 계획을 확인해보세요!.</p>
		<h2>Categories</h2>
		<ul>
			<li><a href="/index.html">Home</a></li>
			<li><a href="/introduction.html">Introduction</a></li>
			<li><a href="/teams.html">Team Dates</a></li>
            
   			<li><a href="/loadmap.html">Our Loadmap</a></li>
   			<li><a href="/story.html">Our Story</a></li>
   			<li><a href="/calendar.html">Dates Calendar</a></li>
   		</ul>
		<h2>Updates</h2>
		<ul>
			<li><a href="/updates.html">2022-Dec</a></li>
<!-- 			<li><a href="#">2017-Aug</a></li>
			<li><a href="#">2017-Jul</a></li>
			<li><a href="#">2017-Jun</a></li>
			<li><a href="#">2017-May</a></li>
 -->
		</ul>
		<h2>Communication</h2>
		<ul>
			<li><a href="http://twitter.com/mlpdesign">Dates Twitter</a></li>
			<li><a href="http://twitter.com/mlpdesign">Dates Discord</a></li>
            <li><a href="http://twitter.com/mlpdesign">Dates Blog</a></li>
		</ul>		
	</div>
	<div class="clear"></div>
	<!--end of sidebar-->

	<!--start containter-->
	<div id="container">
			
		<!--start content-->
		<div id="content">
			<!--post item-->
			<div class="item">
				<h1> 2022년 12월 업데이트 내역 </h1>
                <br>
                <ul>
					<li>Solidity Reveal 기능 추가</li>
					<li>Front-end와 metamask 연결</li>
					<li>백서 URl 업데이트</li>
					</ul>
   
				<blockquote><p> // SPDX-License-Identifier: MIT
 
 pragma solidity ^0.8.7;

 import "@openzeppelin/contracts/token/ERC721/extensions/ERC721Enumerable.sol";
 import "@openzeppelin/contracts/utils/Strings.sol";
 import "@openzeppelin/contracts/access/Ownable.sol";

 contract MintNFT is ERC721Enumerable, Ownable {
    string public metadataURI;
    uint public totalNFT;
    string[] public dates = ['20221127', '20221126', '20221128','20221111'];
    string public notRevealedURI;                           // reveal을 위하여!! - Reveal 되지 않았을때의 URI
    bool public isRevealed = false ;                        // reveal을 위하여!! - Reveal 되었는지 상태

    constructor(string memory _name, string memory _symbol ,string memory _metadataURI, string memory _notRevealedURI, uint _totalNFT) ERC721(_name, _symbol) {
        metadataURI = _metadataURI;
        notRevealedURI = _notRevealedURI;
        totalNFT = _totalNFT;
    }

    function reveal() public onlyOwner {     // reveal을 위하여!! - reveal 함수 만들기, public 여서 밖에서도 가능, Owner만 가능
        isRevealed = true;                   // reveal을 위하여!! - isRevealed을 true로 바꿔줌!!
    }

    function mintNFT() public onlyOwner {
        require(totalNFT > totalSupply(), "No more mint.");

        uint tokenId = totalSupply() + 1;

        _mint(msg.sender, tokenId);
    }

    function batchMint(uint _amount) public onlyOwner {
        for(uint i = 0; i < _amount; i++) {
            mintNFT();
        }
    }

    function tokenURI(uint _tokenId) public override view returns(string memory) {
        if(isRevealed == false) return notRevealedURI;  // reveal을 위하여!! - isRevealed가 false 면 notRevealedURI로 공개!!!
        return string(abi.encodePacked(metadataURI, '/', dates[_tokenId-1], '.json'));
    }

	// 아래 함수가 추가된 부분, 숫자값을 던져주면 배열에서 NFT를 읽어와서 메타 데이터를 읽을 수 있게함
    function getNFTs(address _owner) public view returns(uint[] memory) {
        require(balanceOf(_owner) > 0, "Owner does not have NFT.");
        uint[] memory myNFTs = new uint[](balanceOf(_owner));
        
        for(uint i = 0; i < balanceOf(_owner); i++) {
            myNFTs[i] = tokenOfOwnerByIndex(_owner, i); 
        }
 
        return myNFTs;
    }
 }</p></blockquote>             
                
			<!--end of another post item-->			
		</div>
		<!--end of content-->

	</div>
	<!--end of container-->

</div>
<!--end of body-->

	<!--start footer-->
	<div id="footer">
		<span class="left">2022 &copy; Copyright <a href="#"> Team Dates </a>. All rights reserved.</span>
		<span class="right"><a href="#">Contact</a> | <a href="#">Site Map</a></span>
		<p class="show-footer">2012 &copy; Copyright <a href="#"> Team Dates</a>. All rights reserved.<br /><a href="#">Contact</a> | <a href="#">Site Map</a></p>
	</div>
	<!--end of footer-->	

</div>
<!--end of wrapper-->

	<!--start credits-->
	<!--//Under CC-NC 3.0, this portion must be left intact and must not be hidden.//-->
	<div id="credits">
	<span><a href="http://www.mlpdesign.net" title="CSS &amp; HTML by MLP Design.net">CSS &amp; HTML</a> by MLP Design<br />Licensed under <a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0</a>.</span>
	</div>
	<!--end of credits-->
	
</body>

</html>

